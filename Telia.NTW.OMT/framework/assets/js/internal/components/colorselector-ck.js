function replaceQueryString(e,t,n,r){if(e==undefined||e=="")return"";var i="",s=e.split("&");if(s.length>1){var o=0;while(o<s.length){var u=s[o].split("="),a=$("body").hasClass("lt-ie9")?indexof(u,t):u.indexOf(t),f=-1;if(r!=undefined)for(var l=0;l<u.length;l++)u[l]=u[l].replaceAll(r+";","").replaceAll(r,"");if(a>-1){i=u[1];i=i.replaceAll(r+";","")}o++}}var c=new RegExp("([?|&])"+t+"=.*?(&|$)","i");return e.match(c)?i.length>0?e.replace(c,"$1"+t+"="+n+";"+i+"$2"):e.replace(c,"$1"+t+"="+n+"$2"):i.length>0?e+"&"+t+"="+n+";"+i:e+"&"+t+"="+n}var ColorSelector;typeof ColorSelector=="undefined"&&(ColorSelector={});ColorSelector=function(){var e=0;return{SetSelectedProduct:function(){var e=$("[class*='tsProductLeadins']");e.each(function(){var e=$(this),t=e.data("preselect"),n=$(this).find("[value="+t+"]"),r=e.find(".tsProductList-Item");ColorSelector.SetInStockStatus(n);ColorSelector.ChangeImage(n);r.each(function(){ColorSelector.UpdateColorId(t,$(this))})})},SetInStockStatus:function(e){var t=e.data("label"),n=e.closest(".tsColorlist").siblings(".tsColorlist-header").find(".tsColorlist-selectedcolor");n.text(t)},ChangeImage:function(t){if(t!=undefined&&t.length>0){var n=t.closest(".tsColorlist");n.find("label").removeClass("selected");t.closest("label").addClass("selected");var r=t.data("attr-variant-image"),i=$(".tsProductImage"),s=i.find("img[src='"+r+"']"),o=i.find("img");o.addClass("hide");if(s.length>0)s.removeClass("hide");else{var u="tsProductImage"+e,a='<img id="'+u+'" src="'+r+'" alt=""/>';i.append(a);e++}}},UpdateColorId:function(e,t,n){if(e==undefined||e=="")return;var r=t.find(".tsSelectList-wrap--alt > .tsSelectList").find("a").not('[data-notpreselect="true"]'),i=t.find("a.tsBtn--Primary");r.length>0&&r.each(function(){i.push($(this))});i.each(function(){var t=$(this).attr("href");if(t!=undefined){var r=t.replaceAll("?","").replaceAll("=","").replaceAll("/","").replaceAll(".",""),i=new RegExp(/^.*value.*$/);i=i.source.replace("value","privatkatalogVisaProduktdoproductRef"),key="productIds";r.match(i)&&(key="preselectproducts");var s=replaceQueryString(t,key,e,n),s=replaceQueryString(s,"featured",e,n);(s!=undefined||s!="")&&$(this).attr("href",s)}})}}}();$(document).ready(function(){ColorSelector.SetSelectedProduct();$("body").hasClass("lt-ie9")?$(".tsColorlist > li").on("click","label",function(){var e=$(this).find("input"),t=e.val(),n=$("[class*='tsProductLeadins']");n.each(function(){var n=$(this),r=n.find(".tsProductList-Item, .tsProductList-Item--single");ColorSelector.SetInStockStatus(e);ColorSelector.ChangeImage(e);r.each(function(){ColorSelector.UpdateColorId(t,$(this))});console.log(t);n.data("preselect",t)})}):$("body").on("change",'[name="colorlist"]',function(){if($(this).is(":checked")){var e=$(this),t=e.val(),n=$("[class*='tsProductLeadins']");n.each(function(n){var r=$(this),i=r.find(".tsProductList-Item");ColorSelector.SetInStockStatus(e);ColorSelector.ChangeImage(e);i.each(function(){ColorSelector.UpdateColorId(t,$(this),r.data("preselect"))});console.log(r.data("preselect"));console.log(t);r.data("preselect",t)})}})});